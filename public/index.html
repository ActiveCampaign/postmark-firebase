
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>Postmark + Firebase Sample App</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
        }
        .conatiner {
            margin: 80px auto;
            width: 300px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Sign Up/In with Google</h2>
        <a href="#" class="form--google-signin"><img src="/img/google-signin.png" /></a>
    </div>
    <!-- 1. Include jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <!-- 2. Initialize Firebase -->
    <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase.js"></script>
    <script>
        // TODO: Replace with your project's customized code snippet
        var config = {
            apiKey: "<API_KEY>",
            authDomain: "<PROJECT_ID>.firebaseapp.com",
            databaseURL: "https://<DATABASE_NAME>.firebaseio.com"
        };
        firebase.initializeApp(config);
    </script>
    <!-- 3. Sample authentication code -->
    <script type="text/javascript">
        (function($){
            'use strict';
            // ----------------------------------------------------------
            // VARIABLES
            // ----------------------------------------------------------
            var auth = firebase.auth();
            // ----------------------------------------------------------
            // READY
            // ----------------------------------------------------------
            $(window).load(function(){
                // Kick off events
                initEvents();
            });
            // ----------------------------------------------------------
            // EVENTS
            // ----------------------------------------------------------
            function loginEvents() {
                // Log in or Sign up
                $('.form--google-signin').on('click', function() {
                    authFirebaseInit();
                    return false;
                });
            }
            // ----------------------------------------------------------
            // AUTHENTICATION
            // ----------------------------------------------------------
            function authFirebaseInit() {
                // Attempt to authenticate via Google
                var provider = new firebase.auth.GoogleAuthProvider();
                // We'll use a popup, but you can also auth in a new tab
                auth.signInWithPopup(provider).then(function(result) {
                    // Redirect to admin
                    window.location = '/admin';
                }).catch(function(error) {
                    // TODO: Error handling code here
                    console.log(error);
                });
            }
        })(jQuery);
    </script>
</body>
</html>